     1                                  extern int_to_str
     2                                  
     3                                  section .data
     4 00000000 0000000000408F40            precision dq 1000.0           ; Precision for multiplication
     5 00000008 2E00                        decimal db ".", 0             ; Decimal point for float representation
     6 0000000A E17A14AE47D78340            float_value dq 634.91         ; TEST VALUE
     7                                  
     8                                  section .bss
     9                                  
    10                                  section .text
    11                                  global ftoa
    12                                  
    13                                  ftoa:
    14                                      ; movsd xmm0, [float_value]  IGNORE
    15 00000000 F2480F2CC0                  cvttsd2si rax, xmm0           ; 634.91 --> 634 TRUNCATE
    16 00000005 4989C2                      mov r10, rax                  ; LHS of decimal = r10 
    17 00000008 E8(00000000)                call int_to_str               ; Convert LHS to string
    18 0000000D 4989C6                      mov r14, rax                 
    19                                  
    20 00000010 F20F100C25-                 movsd xmm1, [precision]       ; xmm1 = 1000.0
    20 00000015 [00000000]         
    21 00000019 F20F10D0                    movsd xmm2, xmm0              ; xmm2 = 634.91
    22 0000001D F20F59D1                    mulsd xmm2, xmm1              ; 634.91 * 1000 = 634910
    23 00000021 F24C0F2CCA                  cvttsd2si r9, xmm2            ; r9 = 634910
    24                                  
    25 00000026 4C8B1C25[00000000]          mov r11, [precision]          ; r11 = 1000
    26 0000002E 4D0FAFD3                    imul r10, r11                 ; 634 * 1000 = 634000
    27                                  
    28 00000032 4D89C8                      mov r8, r9                    ; r8 = 634910
    29 00000035 4D29D0                      sub r8, r10                   ; 634910 - 634000 = 910 Subtract to get RHS of decimal
    30 00000038 4C89C0                      mov rax, r8                   ; rax = 9100
    31 0000003B E8(00000000)                call int_to_str               ; Convert 9100 to string
    32 00000040 4989C4                      mov r12, rax
    33                                  
    34 00000043 C3                          ret
